{% extends 'Ecommerce/base.html' %}
{% load static %}

{% block content %}
  <link rel="stylesheet" href="{% static 'Ecommerce/homebody.css' %}" />

  <section class="hero">
    <div class="sub-hero"></div>
    <div class="sub-cont">
      <div class="header">
        <h2>Jyoti Agro</h2>
        <p>
          Get all of your important agricultural supplies and fertilizers<br />
          seed in one place.
        </p>
        <button>Enquiry</button>
      </div>
      <img src="/media/header.jpg" alt="Home" />
    </div>
  </section>

  <section class="categories">
    <h2 class="category-title">Category</h2>
    <div class="category-list">
        {% for category in categories %}
        <div class="category-item">
          {% comment %} <form method="POST" action="{% url 'Ecommerce:product_list' id=category.id %}"> {% endcomment %}
            {% csrf_token %}
                {% if category.category_image %}
                    <img src="{{ category.category_image }}" alt="{{ category.category_name }} Seeds" />
                {% else %}
                    <img src="/static/images/default-image.jpg" alt="Default Image" />
                {% endif %}
                <h4>{{ category.category_name }}</h4>
          {% comment %} </form> {% endcomment %}
        </div>
        {% empty %}
        <p>No categories available.</p>
        {% endfor %}
      
  </section>


  <section class="product-list">
    <h2>Seeds</h2>

    <div class="products-container">
      {% for product in product_data %}

        <div class="product-card">
            <div class="product-image-container">
              <img src="{{ product.product_image }}" alt="{{ product.product_name }}">
                <span class="wishlist-icon"><box-icon name='heart'></box-icon></span>
            </div>
            <div class="product-details">
                <div class="product-header">
                    <h3>{{ product.product_name }}</h3>
                </div>
                <p class="price">â‚¹{{ product.sales_price|default:"N/A" }}</p>
                <div class="rating-container">
                    <span class="star-rating">
                        {% if product.rating %}
                            {% for i in "12345" %}
                                {% if i|add:"0" <= product.rating %}
                                <box-icon type='solid' name='star' color='#f8b400' size="sm"></box-icon>
                                {% else %}
                                <box-icon type='solid' name='star' color='#ddd' size="sm"></box-icon>
                                {% endif %}
                            {% endfor %}
                            <span class="rating">({{ product.rating|floatformat:1 }}/5)</span>
                        {% else %}
                        {% for i in "12345" %}
                        {% if i|add:"0" >= 0 %}
    <box-icon type='solid' name='star' color='#ddd' size="sm"></box-icon>
{% endif %}
{% endfor %}

                            <span class="rating">(0/5)</span>
                        {% endif %}
                    </span>
                </div>
                <button class="add-to-cart">Add to Cart</button>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

  <section class="membership">
    <div class="membership-section">
      <div class="membership-content">
          <h2>Join Our Exclusive Membership</h2>
          <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
          <ul class="benefits">
              <li>15% Discount</li>
              <li>Free Shipping</li>
              <li>Early Access to Products</li>
          </ul>
          <button class="join-btn" onclick="joinMembership()">Join Now</button>
      </div>
      <div class="membership-image">
          <img src="/media/Rectangle 58.png" alt="Membership">
      </div>
  </div>

    {% comment %} <h2>Join Our Exclusive Membership</h2>
    <p>15% Discount, Free Shipping, Early Product Access</p>
    <button>Join Now</button> {% endcomment %}
  </section>

  <section class="faq">
    <h2>Frequently Asked Questions</h2>
    <div class="faq-item">How does this work?</div>
    <div class="faq-item">Another Question?</div>
    <div class="faq-item">Another Question?</div>
  </section>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Handle FAQ Section
      const faqItems = document.querySelectorAll('.faq-item')
    
      faqItems.forEach((item) => {
        item.addEventListener('click', () => {
          const answer = item.querySelector('.faq-answer')
          answer.classList.toggle('visible')
        })
      })
    
      // Handle Add to Cart Buttons
      const cartButtons = document.querySelectorAll('.add-to-cart')
    
      cartButtons.forEach((button) => {
        button.addEventListener('click', () => {
          alert('Product added to cart!')
        })
      })
    })
  </script>
{% endblock %}
